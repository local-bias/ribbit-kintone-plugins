# 📦 入力チェックプラグイン

[ホームページ](https://ribbit.konomi.app)

kintone のレコード入力時に、柔軟な入力チェック（バリデーション）を行うプラグインです。

## 機能

- **柔軟な入力チェック設定**
  - 複数のフィールドに対して、それぞれ独立したバリデーションルールを設定可能
  - 1つのフィールドに対して複数のルールを設定可能

- **対応するバリデーションルール**
  - 必須入力チェック
  - 最小文字数チェック
  - 最大文字数チェック
  - 正確な文字数チェック
  - 正規表現パターンチェック
  - 最小値チェック（数値フィールド用）
  - 最大値チェック（数値フィールド用）
  - 数値の範囲チェック
  - メールアドレス形式チェック
  - URL形式チェック
  - 電話番号形式チェック（日本）
  - 郵便番号形式チェック（日本）
  - 英数字のみチェック
  - 数字のみチェック
  - 英字のみチェック
  - ひらがなのみチェック
  - カタカナのみチェック
  - 特定の文字列を含むチェック
  - 特定の文字列を含まないチェック
  - 特定の文字列で始まるチェック
  - 特定の文字列で終わるチェック

- **適用画面の制御**
  - レコード新規作成時のみ
  - レコード編集時のみ
  - 両方の画面で適用

- **エラー表示タイミングの制御**
  - フィールド変更直後にエラーメッセージを表示
  - レコード保存時のみエラーを表示

## 🔧 使い方

### パッケージのインストール

```
pnpm install
```

### プラグインの秘密キーを作成と、SSL 証明書の作成

```
pnpm run init
```

### ご利用の Kintone へアップロード + ファイルの変更を監視

```
pnpm run dev
```

### リリース用 zip ファイルの生成

```
pnpm run build
```

## 設定項目

### 対象フィールド

入力チェックを行うフィールドを選択します。

### 適用する画面

- **レコード追加画面**: 新規レコード作成時にバリデーションを適用
- **レコード編集画面**: 既存レコード編集時にバリデーションを適用

### フィールド変更時にエラーを表示

有効にすると、フィールドの値が変更された直後にエラーメッセージを表示します。
無効の場合は、レコード保存時のみエラーが表示されます。

### バリデーションルール

複数のルールを設定でき、すべてのルールを満たす必要があります。

#### 基本チェック

| ルール種類 | 説明                             | パラメータ |
| ---------- | -------------------------------- | ---------- |
| 必須入力   | 値が入力されていることをチェック | なし       |

#### 文字数チェック

| ルール種類   | 説明                                             | パラメータ |
| ------------ | ------------------------------------------------ | ---------- |
| 最小文字数   | 入力された文字数が指定値以上であることをチェック | 文字数     |
| 最大文字数   | 入力された文字数が指定値以下であることをチェック | 文字数     |
| 正確な文字数 | 入力された文字数が指定値と一致することをチェック | 文字数     |

#### 数値チェック

| ルール種類 | 説明                                               | パラメータ        |
| ---------- | -------------------------------------------------- | ----------------- |
| 最小値     | 数値フィールドの値が指定値以上であることをチェック | 数値              |
| 最大値     | 数値フィールドの値が指定値以下であることをチェック | 数値              |
| 数値の範囲 | 数値フィールドの値が指定範囲内であることをチェック | 範囲（例: 0-100） |

#### 形式チェック

| ルール種類           | 説明                           | パラメータ |
| -------------------- | ------------------------------ | ---------- |
| メールアドレス形式   | メールアドレスの形式をチェック | なし       |
| URL形式              | URLの形式をチェック            | なし       |
| 電話番号形式（日本） | 日本の電話番号形式をチェック   | なし       |
| 郵便番号形式（日本） | 日本の郵便番号形式をチェック   | なし       |

#### 文字種チェック

| ルール種類   | 説明                         | パラメータ |
| ------------ | ---------------------------- | ---------- |
| 英数字のみ   | 英数字のみで入力をチェック   | なし       |
| 数字のみ     | 数字のみで入力をチェック     | なし       |
| 英字のみ     | 英字のみで入力をチェック     | なし       |
| ひらがなのみ | ひらがなのみで入力をチェック | なし       |
| カタカナのみ | カタカナのみで入力をチェック | なし       |

#### 文字列チェック

| ルール種類             | 説明                                     | パラメータ |
| ---------------------- | ---------------------------------------- | ---------- |
| 特定の文字列を含む     | 指定した文字列が含まれることをチェック   | 文字列     |
| 特定の文字列を含まない | 指定した文字列が含まれないことをチェック | 文字列     |
| 特定の文字列で始まる   | 指定した文字列で始まることをチェック     | 文字列     |
| 特定の文字列で終わる   | 指定した文字列で終わることをチェック     | 文字列     |

#### カスタムチェック

| ルール種類       | 説明                                       | パラメータ |
| ---------------- | ------------------------------------------ | ---------- |
| 正規表現パターン | 入力値が正規表現にマッチすることをチェック | 正規表現   |
