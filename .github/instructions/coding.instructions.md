---
applyTo: '**'
---

# コーディング規約

## ソースファイルの基本と構成

- **ファイルエンコーディング**: ソースファイルは **UTF-8** でエンコードされます。
- **ファイル構造**: ファイルは以下の順序で構成されます。各セクション間には **正確に 1 行の空白行** を入れます。
  1.  `@fileoverview` JSDoc (任意)
  2.  インポート
  3.  ファイルの実装
- **JSDoc**: `/** @fileoverview ... */` はファイルの概要や目的を記述するために使用します。

## ファイル名と場所

- **拡張子**: TypeScript ファイルは `.ts`、React コンポーネントは `.tsx` を使用します。
- **命名規則**: ファイル名は **lower-kebab-case** を使用します。例: `foo-bar.ts`、`my-component.tsx`
- **ディレクトリ構造**: 関連するファイルは同じディレクトリに配置し、ディレクトリ名も **lower-kebab-case** を使用します。

## モジュールとインポート

- **モジュール構文**: TypeScript コードの相互参照には、ES6 モジュール構文 (`import` / `export`) を **必須** とします。`namespace` キーワード（内部モジュール）や `require` は **使用不可** です。
- **インポートパス**: 他の TypeScript コードのインポートにはパスを **必須** とし、同じプロジェクト内のファイル参照には相対パス (`./foo`) を推奨します。
- **インポートの種類**:
  - **名前付きインポート** (`import {Foo} from '...'`)：ファイル内で頻繁に使用するシンボルや、明確な名前を持つシンボルに推奨されます。
  - **名前空間インポート** (`import * as foo from '...'`)：大規模 API から多くの異なるシンボルを使用する場合に推奨されます。
- **デフォルトエクスポート**: デフォルトエクスポートは **使用不可** です。常に名前付きエクスポート (`export class Foo { ... }`) を使用し、一貫性を保ちます。
- **ミュータブルなエクスポート**: `export let` のようなミュータブルなエクスポートは **使用不可** です。外部から変更可能なバインディングが必要な場合は、明示的な getter 関数を使用します。
- **型のみのインポート/エクスポート**: 型のみをインポート/エクスポートする場合は `import type` / `export type` を使用できます。

## 言語機能

### 変数、配列、オブジェクト

- **変数宣言**: 変数は常に `const` または `let` で宣言し、`var` は **使用不可** です。
- **配列リテラル**: `Array()` コンストラクタは **使用不可** です。常にブラケット表記 (`[]`) を使用します。配列に非数値プロパティを定義することは **使用不可** です。
- **オブジェクトリテラル**: `Object()` コンストラクタは **使用不可** です。オブジェクトリテラル (`{}`) を使用します。
- **スプレッド構文**: 配列を作成する際はイテラブルのみ、オブジェクトを作成する際はオブジェクトのみにスプレッド構文を適用し、プリミティブ型は **使用不可** です。
- **オブジェクトのイテレーション**: `for...in` ループはエラーの原因となるため、プロトタイプチェーンのプロパティを明示的にフィルタリングするか、`Object.keys`、`Object.values`、`Object.entries` と `for...of` を組み合わせることを推奨します。

### クラス

- **クラス宣言**: クラス宣言の末尾にセミコロンは **不要** です。
- **プライベートフィールド**: `#ident` のようなプライベートフィールドは **使用不可** です。TypeScript の `private` 修飾子を使用します。
- **`readonly` 修飾子**: コンストラクタ以外で再代入されないプロパティには `readonly` 修飾子を使用します。
- **`this` の使用**: `this` はクラスのコンストラクタとメソッド、明示的な `this` 型が宣言された関数、または `this` が使用可能なスコープで定義されたアロー関数でのみ使用します。静的コンテキストでの `this` の使用は **使用不可** です。

### 関数

- **関数宣言とアロー関数**: 名前付き関数には関数宣言 (`function`) を推奨します。関数式 (`function() {...}`) は、`this` の動的な再バインドが必要な場合（非推奨）やジェネレータ関数を除き、**使用不可** です。
- **アロー関数のボディ**: アロー関数は、簡潔なボディ（式）またはブロックボディを適切に使用します。戻り値が使用されない場合はブロックボディを推奨します。
- **コールバック**: コールバックとしてアロー関数を渡すことを推奨し、意図しない引数マッピングを防ぎます。
- **イベントハンドラ**: アンインストールが必要なイベントハンドラには、アロー関数プロパティを推奨します。`bind` をイベントハンドラのインストール式で使用することは **使用不可** です。
- **Rest パラメータ**: `arguments` の代わりに rest パラメータ (`...numbers`) を使用します。

### 型とその他

- **文字列リテラル**: シングルクォート (`'`) を使用し、複雑な文字列結合にはテンプレートリテラル (`` ` ``) を推奨します。
- **型強制**: `String()`, `Boolean()` 関数やテンプレートリテラル、`!!` を型強制に使用できます。単項プラス (`+`) を数値への型強制に使うことは **使用不可** です。
- **Enum の Boolean 変換**: `enum` 型の値を `Boolean()` や `!!` でブーリアンに変換することは **使用不可** です。明示的な比較演算子を使用します。
- **数値パース**: 数値のパースには `Number()` を使用し、常に `NaN` チェックを行うことを **必須** とします。`parseInt` や `parseFloat` は、10 進数以外の基数でのパースを除き、**使用不可** です。
- **制御文の波括弧**: `if`、`for`、`while` 文では、ボディが単一のステートメントであっても、常に波括弧 (`{}`) を使用します。
- **等価性チェック**: 常に厳密等価演算子 (`===`, `!==`) を使用します。ただし、`null` と `undefined` の両方をチェックする場合は `== null` を使用できます。
- **型アサーション**: 型アサーション (`x as SomeType`) や非 null アサーション (`y!`) は安全ではないため、明確な理由がない限り **使用不可** です。ランタイムチェックを追加するか、理由をコメントで説明します。オブジェクトリテラルで型を指定する際は、型アサーションではなく型アノテーション (`: Foo`) を推奨します。
- **デコレータ**: 新しいデコレータの定義は **使用不可** です。Angular や Polymer などのフレームワークで定義されたもののみ使用します。
- **プリミティブ型ラッパー**: プリミティブ型ラッパークラス (`new String()`, `new Boolean()`, `new Number()`) のインスタンス化は **使用不可** です。
- **セミコロン**: 自動セミコロン挿入 (ASI) に依存せず、すべてのステートメントをセミコロンで明示的に終了します。
- **`const enum`**: `const enum` は **使用不可** です。プレーンな `enum` を使用します。
- **`any` 型**: `any` 型は **使用不可** です。代わりに `unknown` やより具体的な型を使用することを推奨します。
- **`{}` 型**: `object`、`unknown`、`Record<string, T>` のいずれかを推奨し、`{}` 型は **使用不可** です。
- **オブジェクトの型定義**: オブジェクトの型定義には型エイリアスよりもインターフェースを推奨します。
- **配列の型表記**: 単純な型の場合、`T[]` または `readonly T[]` 形式を推奨します。

### React

- **JSX ファイル**: JSX を含むファイルは `.tsx` 拡張子を使用します。
- **コンポーネント命名**: React コンポーネントは UpperCamelCase を使用しますが、ファイル名**lower-kebab-case** を使用します。(例: `MyComponent` は `my-component.tsx` に配置)
- **関数コンポーネント**: 関数コンポーネントは原則として`function`宣言を使用します。アロー関数は、コンポーネントが高階関数に渡される場合や、`this` の動的な再バインドが必要な場合（非推奨）にのみ使用します。

## 命名規則

- **文字**: 識別子には ASCII 文字、数字、アンダースコア、稀に`$`を使用します。
- **情報量**: 型が情報を提供するため、名前にプライベートプロパティのアンダースコアプレフィックスなど、型に重複する情報を装飾することは **使用不可** です。
- **記述性**: 記述的で明確な名前を **必須** とし、あいまいな省略形は **使用不可** です。
- **ケース**: 識別子のタイプに応じて、UpperCamelCase、lowerCamelCase、CONSTANT_CASE を使用します。
- **アンダースコア**: `_` をプレフィックス/サフィックスや単独の識別子として使用することは **使用不可** です。

## コメントとドキュメンテーション

- **コメントの種類**: JSDoc (`/** ... */`) はコードの利用者向けドキュメントに、行コメント (`// ...` または `/* ... */`) は実装の詳細にのみ使用します。
- **複数行コメント**: 複数行のコメントは複数行の `//` スタイルを推奨します。
- **JSDoc の記述**: JSDoc は Markdown で記述します。`@param` や `@return` のような JSDoc タグは、情報が付加される場合にのみ使用し、単に名前と型を繰り返すコメントは **使用不可** です。
- **JSDoc とデコレータ**: クラス、メソッド、プロパティがデコレータと JSDoc の両方を持つ場合、JSDoc をデコレータの前に記述します。

## ポリシー

- **`@ts-ignore` 等**: `@ts-ignore`、`@ts-expect-error`、`@ts-nocheck` は、特別なユニットテストの場合を除き、**使用不可** です。
